<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibrosEnRed</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Lato' type='text/css'>
    <link rel="stylesheet" href="{{url_for('static',filename='css/style_home.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='css/style_cargar_libros.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='css/style_footer.css')}}">
</head>

<body>
    <nav>
        <i id="logo" class="fa-solid fa-book nav-icon"></i>
        <ul>
            <li><a href="{{url_for('home')}}"><i class="fa-solid fa-home nav-icon"></i> Inicio</a></li>
            <li><a href="#"><i class="fa-solid fa-mobile nav-icon"></i> App</a></li>
            <li><a href="{{url_for('perfil')}}"><i class="fa-solid fa-user nav-icon"></i>Perfil</a></li>
        </ul>
        <button class="sign-out"> <a class="links" href="{{url_for('logout')}}">Sign Out</a></button>
        <button class="sign-out"> <a class="links" href="{{url_for('logout')}}">Sign Out</a></button>
            <div class="search-container">
                <form id="search-form">
                    <input type="text" id="name" name="name" class="search-input" placeholder="Search..." />
                    <button id="searchButton" class="search-button">
                        <i class="fa-solid fa-search"></i>
                    </button>
                </form>
                <div id="results" class="results"></div>
            </div>
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="Search..." />
        </div>
    </nav>

    <h2 class="cargar-libro">Cargar un libro</h2>

    <div class="form-container">
        <div class="contact-page">
            <form id="bookForm">
                <div class="nombre-form">
                    <fieldset>
                        <input type="text" name="name" id="name" placeholder="Nombre libro" autocomplete="on" required>
                    </fieldset>
                </div>
                <div class="autor-form">
                    <fieldset>
                        <input type="text" name="author" id="author" placeholder="Autor" autocomplete="on" required>
                    </fieldset>
                </div>

                <div class="genero-form">
                    <fieldset>
                        <label for="genre"></label>
                        <select name="genre" id="genre" required>
                            <option value="" disabled selected>Seleccione un género</option>
                            <option value="Acción">Acción</option>
                            <option value="Arte">Arte</option>
                            <option value="Autoayuda">Autoayuda</option>
                            <option value="Aventuras">Aventuras</option>
                            <option value="Biografías">Biografías</option>
                            <option value="Cocina">Cocina</option>
                            <option value="Contemporáneo">Contemporáneo</option>
                            <option value="Cs. Ficción">Cs. Ficción</option>
                            <option value="Distopía">Distopía</option>
                            <option value="Divulgativos">Divulgativos</option>
                            <option value="Drama">Drama</option>
                            <option value="Fantasía">Fantasía</option>
                            <option value="Historia">Historia</option>
                            <option value="Infantil">Infantil</option>
                            <option value="Manuales">Manuales</option>
                            <option value="Memorias">Memorias</option>
                            <option value="Paranormal">Paranormal</option>
                            <option value="Poesía">Poesía</option>
                            <option value="Romance">Romance</option>
                            <option value="Salud">Salud</option>
                            <option value="Suspenso">Suspenso</option>
                            <option value="Terror">Terror</option>
                        </select>
                    </fieldset>
                </div>
                
                <div class="owner_id">
                    <fieldset>
                        <input type="hidden" name="owner_id" id="owner_id" value="{{ session['user_id'] }}">
                    </fieldset>
                </div>

                <div class="description-form">
                    <fieldset>
                        <textarea name="description" class="form-control" id="description" placeholder="Descripción del libro" required></textarea>  
                    </fieldset>
                </div>
                <div class="portada-form">
                    <fieldset>        
                        <input type="file" name="photo" id="photo" accept="image/*" required>        
                    </fieldset>        
                </div>
    
                <div class="button-form">
                    <button type="submit" class="btn btn-4 btn-sep icon-send">Enviar</button>
                </div>                
            </form> 
        </div>
    </div>
    
    {% include 'footer.html' %}
    
    <script src="{{url_for('static', filename='js/script_home.js')}}"></script>
    
    <script src="{{url_for('static', filename='js/script_cargar_libro.js')}}"></script>

<<<<<<< HEAD
        const formData = new FormData(this); // Esto incluye automáticamente el archivo

        // No es necesario crear un objeto data, ya que FormData maneja todo
        fetch('http://127.0.0.1:5001/books', {
            method: 'POST',
            body: formData  // Enviar el FormData directamente
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            console.log('Completado:', data);
            alert('Carga de libro exitosa');
            window.location.href = "{{url_for('home')}}";
        })
        .catch((error) => {
            console.error('Error:', error);
            alert('Error al cargar el libro. Verifique los datos cargados');
        });
    });
    </script>
    <script src="{{url_for('static', filename='js/search.js')}}"></script>
=======
>>>>>>> c5ee9783cb0947613d95328e8a363460bdf26f97
    </body>
    
    </html>
